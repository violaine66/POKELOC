<div style="width: 100%; height: 300px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

<div class="container">

  <div class="pokemons">
  <h2 class= "my-3">Pokemons list</h2>

</div>
<div class="pokemons-grid-index my-5">

   <% @pokemons.each do |pokemon| %>
    <div>
      <h3><%= pokemon.name %> - <%= pokemon.element_type %></h3>
        <% if pokemon.photos.attached? %>

        <%= image_tag pokemon.photos.first, alt: pokemon.name, class: "pokemon-image", width: 200 %>

        <% else %>
        <p>No image available</p>
      <% end %>
      <p>Address : <%= pokemon.address %></p>
      <p>Price per day : <%= pokemon.price_per_day %> €</p>
      <%= link_to "See this Pokemon", pokemon_path(pokemon), class:"text-decoration-none"%>

    </div>

<% end %>

<h2>Rechercher un Pokémon</h2>

<%= form_with url: search_pokemons_path, method: :get, local: true do %>
  <%= label_tag :query, "Nom, Type ou Adresse :" %>
  <%= text_field_tag :query, params[:query] %>
  <%= submit_tag "Rechercher" %>
<% end %>

<h2>Résultats :</h2>

<% @pokemons.each do |pokemon| %>
  <div>
    <h3><%= pokemon.name %> - <%= pokemon.element_type %></h3>
    <p>Adresse : <%= pokemon.address %></p>
    <p>Prix : <%= pokemon.price_per_day %> €</p>
    <%= link_to "Voir", pokemon_path(pokemon) %>
  </div>
  <hr>
<% end %>
